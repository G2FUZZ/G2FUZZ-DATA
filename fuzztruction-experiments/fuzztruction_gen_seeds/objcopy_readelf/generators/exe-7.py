import subprocess
import os

# Define the Python script content
python_script_content = """
print("Hello, World!")
"""

# Save the Python script to a file
script_filename = 'script.py'
with open(script_filename, 'w') as script_file:
    script_file.write(python_script_content)

# Compile the Python script to an executable using pyinstaller
# Ensure pyinstaller is installed: pip install pyinstaller
compile_command = 'pyinstaller --onefile script.py --distpath ./tmp/'
subprocess.run(compile_command, shell=True)

# Path to the compiled executable
exe_path = './tmp/script.exe'

# Define the overlay data to append
overlay_data = b"This is the overlay data."

# Append the overlay data to the executable
with open(exe_path, 'ab') as exe_file:
    exe_file.write(overlay_data)

# Cleanup the script and spec file generated by PyInstaller
os.remove(script_filename)
os.remove(f"{script_filename[:-3]}.spec")

print(f"Overlay data appended to {exe_path}")