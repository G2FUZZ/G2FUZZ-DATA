import os

def create_elf_file():
    # ELF header + Program header for a minimal dynamically linked executable
    elf_header = bytes([
        0x7f, 0x45, 0x4c, 0x46,  # Magic number
        0x02,  # 64-bit
        0x01,  # Little endian
        0x01,  # ELF version
        0x00,  # OS ABI (System V)
        0x00,  # ABI version
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Padding
        0x02, 0x00,  # Type: EXEC (Executable file)
        0x3e, 0x00,  # Machine: x86-64
        0x01, 0x00, 0x00, 0x00,  # ELF version
        0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Entry point address
        0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Program header table file offset
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Section header table file offset
        0x00, 0x00, 0x00, 0x00,  # Flags
        0x40, 0x00,  # ELF header size
        0x38, 0x00,  # Program header table entry size
        0x01, 0x00,  # Number of program header entries
        0x00, 0x00,  # Section header table entry size
        0x00, 0x00,  # Number of section header entries
        0x00, 0x00,  # Section header string table index
    ])

    program_header = bytes([
        0x01, 0x00, 0x00, 0x00,  # Type: LOAD
        0x05, 0x00, 0x00, 0x00,  # Flags: R + E
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Offset
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Virtual address
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Physical address (unused)
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # File size
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Memory size
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  # Alignment
    ])

    # Combine ELF header and program header
    elf_content = elf_header + program_header

    # Ensure the tmp directory exists
    os.makedirs('./tmp/', exist_ok=True)

    # Write the ELF content to a file
    with open('./tmp/dynamic_linked_elf', 'wb') as elf_file:
        elf_file.write(elf_content)

if __name__ == '__main__':
    create_elf_file()